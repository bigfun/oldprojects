<?php defined('SYSPATH') or die('No direct script access.');

class Controller extends Controller_Core {
	public $template = 'template';
	public $auto_render = TRUE;
		
    public function __construct() {
        parent::__construct();
        $this->session = Session::instance();    
		$this->template = new View($this->template);
		$this->template->title = 'easyshop';
		$this->template->side_login = View::factory('admin/side_login')->set('name', $this->_user());

		if ($this->auto_render == TRUE) {
			Event::add('system.post_controller', array($this, '_render'));
		}
    }
    
    public function _user() {
        return $this->session->get('permission', 0);
    }
    
    public function _render() {
    	if ($this->auto_render == TRUE) {
    		$this->template->render(TRUE);
	    }
    }

}
